<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏î</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #2d3436; --accent: #f39c12; --success: #2ecc71; --danger: #e74c3c; --bg: #f0f2f5; }
        * { box-sizing: border-box; font-family: 'Kanit', sans-serif; }
        body { background-color: var(--bg); margin: 0; padding: 10px; padding-top: 180px; }

        /* Header ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
        .header-summary { position: fixed; top: 0; left: 0; right: 0; background: var(--primary); color: white; padding: 15px; border-radius: 0 0 20px 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 1000; }
        .header-container { max-width: 1000px; margin: 0 auto; }
        .header-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 8px; text-align: center; }
        .header-item { font-size: 0.75rem; opacity: 0.8; }
        .header-item b { display: block; font-size: 1.1rem; opacity: 1; color: #fff; }
        .header-total { border-top: 1px solid #444; padding-top: 8px; display: flex; justify-content: space-between; align-items: center; }
        .grand-total-price { font-size: 1.6rem; font-weight: bold; color: var(--accent); }

        /* ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏•‡∏¢‡πå‡πÄ‡∏≠‡∏≤‡∏ï‡πå */
        .main-layout { max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .card { background: white; border-radius: 16px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; }
        
        /* ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÄ‡∏î‡πà‡∏ô‡πÜ */
        .cash-display { background: #e6fffa; border: 2px solid #38b2ac; text-align: center; padding: 10px; border-radius: 12px; margin-bottom: 15px; }
        .cash-display label { font-size: 0.8rem; color: #2c7a7b; font-weight: bold; }
        .cash-display .val { font-size: 1.8rem; font-weight: 800; color: #234e52; }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏ö‡πÅ‡∏¢‡∏Å */
        .toggle-container { text-align: center; margin-bottom: 15px; }
        .btn-toggle { width: 100%; background: #edf2f7; border: 2px solid #cbd5e1; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; color: #4a5568; }
        .btn-toggle.active { background: #4a5568; color: white; }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏¢‡∏Å‡∏ä‡∏ô‡∏¥‡∏î */
        #detail-section { display: none; margin-top: 10px; border-top: 1px dashed #ccc; padding-top: 10px; }
        .money-row { display: flex; align-items: center; background: #f8f9fa; padding: 6px 10px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 4px; }
        .money-row label { width: 90px; font-weight: bold; color: #555; }
        .money-row input { flex: 1; border: 1px solid #ddd; border-radius: 6px; padding: 8px; text-align: right; font-size: 1.1rem; }

        /* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å */
        .big-input { margin-bottom: 15px; }
        .big-input label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        .big-input input { width: 100%; padding: 15px; border-radius: 12px; border: 2px solid #cbd5e1; font-size: 1.5rem; text-align: right; font-weight: bold; }

        /* ‡∏õ‡πâ‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á */
        .diff-tag { font-size: 0.9rem; padding: 5px 15px; border-radius: 20px; font-weight: bold; background: #444; color: #ccc; }
        .diff-plus { background: var(--success); color: white; }
        .diff-minus { background: var(--danger); color: white; }

        @media (max-width: 768px) {
            body { padding-top: 170px; }
            .main-layout { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="header-summary">
    <div class="header-container">
        <div class="header-grid">
            <div class="header-item">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î<b id="h-cash">0.00</b></div>
            <div class="header-item">‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô<b id="h-bank">0.00</b></div>
            <div class="header-item">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢<b id="h-target">0.00</b></div>
        </div>
        <div class="header-total">
            <div><span style="font-size: 0.7rem;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span><div class="grand-total-price" id="g-total">0.00</div></div>
            <div id="diff-tag" class="diff-tag">‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
        </div>
    </div>
</div>

<div class="main-layout">
    <div class="card">
        <div class="cash-display">
            <label>‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÑ‡∏î‡πâ</label>
            <div class="val" id="display-cash-total">0.00</div>
        </div>

        <div class="big-input">
            <label>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏£‡∏ß‡∏° (Cash)</label>
            <input type="number" id="manual-cash" placeholder="0.00" oninput="doCalc('manual')" onclick="this.select()">
        </div>

        <div class="toggle-container">
            <button class="btn-toggle" id="t-btn" onclick="toggleDetails()">üîΩ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</button>
        </div>

        <div id="detail-section">
            <div style="font-size: 0.8rem; color: #888; margin-bottom: 5px;">‡∏ò‡∏ô‡∏ö‡∏±‡∏ï‡∏£:</div>
            <div class="money-row"><label>1,000</label><input type="number" class="qty" data-val="1000" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>500</label><input type="number" class="qty" data-val="500" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>100</label><input type="number" class="qty" data-val="100" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>50</label><input type="number" class="qty" data-val="50" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>20</label><input type="number" class="qty" data-val="20" oninput="doCalc('detail')" onclick="this.select()"></div>
            
            <div style="font-size: 0.8rem; color: #888; margin: 10px 0 5px 0;">‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç:</div>
            <div class="money-row"><label>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç 10</label><input type="number" class="qty" data-val="10" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç 5</label><input type="number" class="qty" data-val="5" oninput="doCalc('detail')" onclick="this.select()"></div>
            <div class="money-row"><label>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç 1</label><input type="number" class="qty" data-val="1" oninput="doCalc('detail')" onclick="this.select()"></div>
        </div>
    </div>

    <div>
        <div class="card big-input" style="border-left: 5px solid #3498db;">
            <label style="color:#2980b9;">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô (Bank)</label>
            <input type="number" id="bank-in" placeholder="0.00" oninput="doCalc('other')" onclick="this.select()">
        </div>
        <div class="card big-input" style="border-left: 5px solid var(--primary);">
            <label>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (Target)</label>
            <input type="number" id="target-in" placeholder="0.00" oninput="doCalc('other')" onclick="this.select()">
        </div>
        <button onclick="if(confirm('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà?')) location.reload()" style="width:100%; padding:15px; border-radius:12px; border:none; background:#ccc; font-weight:bold; cursor:pointer;">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà</button>
    </div>
</div>

<script>
    let currentCashMode = 'manual';

    function toggleDetails() {
        const div = document.getElementById('detail-section');
        const btn = document.getElementById('t-btn');
        if (div.style.display === 'none' || div.style.display === '') {
            div.style.display = 'block';
            btn.textContent = 'üîº ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏ö‡πÅ‡∏¢‡∏Å';
            btn.classList.add('active');
        } else {
            div.style.display = 'none';
            btn.textContent = 'üîΩ ‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏±‡∏ö‡πÅ‡∏¢‡∏Å‡πÉ‡∏ö/‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç';
            btn.classList.remove('active');
        }
    }

    function doCalc(mode) {
        const manual = document.getElementById('manual-cash');
        const qtys = document.querySelectorAll('.qty');
        
        if (mode === 'manual' || mode === 'detail') {
            currentCashMode = mode;
        }

        let cashTotal = 0;

        if (currentCashMode === 'manual') {
            cashTotal = parseFloat(manual.value) || 0;
            if (mode === 'manual') {
                qtys.forEach(q => q.value = '');
            }
        } else {
            qtys.forEach(q => {
                const v = parseFloat(q.getAttribute('data-val'));
                const count = parseFloat(q.value) || 0;
                cashTotal += (v * count);
            });
            if (mode === 'detail') {
                manual.value = '';
                manual.placeholder = cashTotal > 0 ? cashTotal.toLocaleString() : "0.00";
            }
        }

        const bank = parseFloat(document.getElementById('bank-in').value) || 0;
        const target = parseFloat(document.getElementById('target-in').value) || 0;
        const grand = cashTotal + bank;
        const diff = grand - target;

        document.getElementById('display-cash-total').textContent = cashTotal.toLocaleString(undefined, {minimumFractionDigits: 2});
        document.getElementById('h-cash').textContent = cashTotal.toLocaleString();
        document.getElementById('h-bank').textContent = bank.toLocaleString();
        document.getElementById('h-target').textContent = target.toLocaleString();
        document.getElementById('g-total').textContent = grand.toLocaleString(undefined, {minimumFractionDigits: 2});

        const tag = document.getElementById('diff-tag');
        if (target <= 0) {
            tag.textContent = "‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
            tag.className = "diff-tag";
        } else {
            if (Math.abs(diff) < 0.1) {
                tag.textContent = "‚úÖ ‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏á";
                tag.className = "diff-tag diff-plus";
            } else {
                tag.textContent = (diff > 0 ? "‡πÄ‡∏Å‡∏¥‡∏ô +" : "‡∏Ç‡∏≤‡∏î ") + diff.toLocaleString();
                tag.className = "diff-tag " + (diff > 0 ? "diff-plus" : "diff-minus");
            }
        }
    }
</script>
</body>
</html>
